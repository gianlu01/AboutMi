{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport * as React from 'react';\nimport { withMap } from './context';\nvar containerStyle = {\n  position: 'absolute',\n  zIndex: 10,\n  display: 'flex',\n  flexDirection: 'column',\n  boxShadow: '0px 1px 4px rgba(0, 0, 0, .3)',\n  border: '1px solid rgba(0, 0, 0, 0.1)'\n};\nvar positions = {\n  'top-right': {\n    top: 62,\n    right: 10,\n    bottom: 'auto',\n    left: 'auto'\n  },\n  'top-left': {\n    top: 62,\n    left: 10,\n    bottom: 'auto',\n    right: 'auto'\n  },\n  'bottom-right': {\n    bottom: 63,\n    right: 10,\n    top: 'auto',\n    left: 'auto'\n  },\n  'bottom-left': {\n    bottom: 63,\n    left: 10,\n    top: 'auto',\n    right: 'auto'\n  }\n};\nvar buttonStyle = {\n  backgroundColor: '#f9f9f9',\n  opacity: 0.95,\n  transition: 'background-color 0.16s ease-out',\n  cursor: 'pointer',\n  border: 0,\n  height: 26,\n  width: 26,\n  outline: 0,\n  padding: 3\n};\nvar buttonStyleHovered = {\n  backgroundColor: '#fff',\n  opacity: 1\n};\nvar buttonStyleCompass = {\n  borderBottom: '1px solid rgba(0, 0, 0, 0.1)',\n  borderTopLeftRadius: 2,\n  borderTopRightRadius: 2,\n  borderBottomLeftRadius: 2,\n  borderBottomRightRadius: 2\n};\n\nvar Icon = function Icon() {\n  return React.createElement(\"svg\", {\n    viewBox: \"0 0 20 20\"\n  }, React.createElement(\"polygon\", {\n    fill: \"#333333\",\n    points: \"6,9 10,1 14,9\"\n  }), React.createElement(\"polygon\", {\n    fill: \"#CCCCCC\",\n    points: \"6,11 10,19 14,11\"\n  }));\n};\n\nvar compassSpan = {\n  width: 20,\n  height: 20,\n  display: 'inline-block'\n};\nvar COMPASS = [0][0];\nvar POSITIONS = Object.keys(positions);\n\nvar RotationControl = function (_super) {\n  __extends(RotationControl, _super);\n\n  function RotationControl() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      hover: undefined\n    };\n    _this.compassIcon = null;\n\n    _this.onMouseOut = function () {\n      if (!_this.state.hover) {\n        _this.setState({\n          hover: undefined\n        });\n      }\n    };\n\n    _this.onMouseIn = function () {\n      if (COMPASS !== _this.state.hover) {\n        _this.setState({\n          hover: COMPASS\n        });\n      }\n    };\n\n    _this.onClickCompass = function () {\n      _this.props.map.resetNorth();\n    };\n\n    _this.onMapRotate = function () {\n      var map = _this.props.map;\n      var rotate = \"rotate(\" + map.transform.angle * (180 / Math.PI) + \"deg)\";\n\n      if (_this.compassIcon) {\n        _this.compassIcon.style.transform = rotate;\n      }\n    };\n\n    _this.assignRef = function (icon) {\n      _this.compassIcon = icon;\n    };\n\n    return _this;\n  }\n\n  RotationControl.prototype.componentDidMount = function () {\n    this.props.map.on('rotate', this.onMapRotate);\n  };\n\n  RotationControl.prototype.componentWillUnmount = function () {\n    this.props.map.off('rotate', this.onMapRotate);\n  };\n\n  RotationControl.prototype.render = function () {\n    var _a = this.props,\n        position = _a.position,\n        style = _a.style,\n        className = _a.className,\n        tabIndex = _a.tabIndex;\n    var hover = this.state.hover;\n\n    var controlStyle = __assign({}, buttonStyle, buttonStyleCompass, hover === COMPASS ? buttonStyleHovered : {});\n\n    return React.createElement(\"div\", {\n      className: className,\n      tabIndex: tabIndex,\n      style: __assign({}, containerStyle, positions[position], style)\n    }, React.createElement(\"button\", {\n      style: controlStyle,\n      onMouseOver: this.onMouseIn,\n      onMouseOut: this.onMouseOut,\n      onClick: this.onClickCompass\n    }, React.createElement(\"span\", {\n      ref: this.assignRef,\n      style: compassSpan\n    }, React.createElement(Icon, null))));\n  };\n\n  RotationControl.defaultProps = {\n    position: POSITIONS[0]\n  };\n  return RotationControl;\n}(React.Component);\n\nexport { RotationControl };\nexport default withMap(RotationControl);","map":{"version":3,"sources":["../src/rotation-control.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nimport * as React from 'react';\r\nimport { withMap } from './context';\r\nvar containerStyle = {\r\n    position: 'absolute',\r\n    zIndex: 10,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    boxShadow: '0px 1px 4px rgba(0, 0, 0, .3)',\r\n    border: '1px solid rgba(0, 0, 0, 0.1)'\r\n};\r\nvar positions = {\r\n    'top-right': { top: 62, right: 10, bottom: 'auto', left: 'auto' },\r\n    'top-left': { top: 62, left: 10, bottom: 'auto', right: 'auto' },\r\n    'bottom-right': { bottom: 63, right: 10, top: 'auto', left: 'auto' },\r\n    'bottom-left': { bottom: 63, left: 10, top: 'auto', right: 'auto' }\r\n};\r\nvar buttonStyle = {\r\n    backgroundColor: '#f9f9f9',\r\n    opacity: 0.95,\r\n    transition: 'background-color 0.16s ease-out',\r\n    cursor: 'pointer',\r\n    border: 0,\r\n    height: 26,\r\n    width: 26,\r\n    outline: 0,\r\n    padding: 3\r\n};\r\nvar buttonStyleHovered = {\r\n    backgroundColor: '#fff',\r\n    opacity: 1\r\n};\r\nvar buttonStyleCompass = {\r\n    borderBottom: '1px solid rgba(0, 0, 0, 0.1)',\r\n    borderTopLeftRadius: 2,\r\n    borderTopRightRadius: 2,\r\n    borderBottomLeftRadius: 2,\r\n    borderBottomRightRadius: 2\r\n};\r\nvar Icon = function () { return (React.createElement(\"svg\", { viewBox: \"0 0 20 20\" },\r\n    React.createElement(\"polygon\", { fill: \"#333333\", points: \"6,9 10,1 14,9\" }),\r\n    React.createElement(\"polygon\", { fill: \"#CCCCCC\", points: \"6,11 10,19 14,11\" }))); };\r\nvar compassSpan = {\r\n    width: 20,\r\n    height: 20,\r\n    display: 'inline-block'\r\n};\r\nvar COMPASS = [0][0];\r\nvar POSITIONS = Object.keys(positions);\r\nvar RotationControl = (function (_super) {\r\n    __extends(RotationControl, _super);\r\n    function RotationControl() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            hover: undefined\r\n        };\r\n        _this.compassIcon = null;\r\n        _this.onMouseOut = function () {\r\n            if (!_this.state.hover) {\r\n                _this.setState({ hover: undefined });\r\n            }\r\n        };\r\n        _this.onMouseIn = function () {\r\n            if (COMPASS !== _this.state.hover) {\r\n                _this.setState({ hover: COMPASS });\r\n            }\r\n        };\r\n        _this.onClickCompass = function () {\r\n            _this.props.map.resetNorth();\r\n        };\r\n        _this.onMapRotate = function () {\r\n            var map = _this.props.map;\r\n            var rotate = \"rotate(\" + map.transform.angle *\r\n                (180 / Math.PI) + \"deg)\";\r\n            if (_this.compassIcon) {\r\n                _this.compassIcon.style.transform = rotate;\r\n            }\r\n        };\r\n        _this.assignRef = function (icon) {\r\n            _this.compassIcon = icon;\r\n        };\r\n        return _this;\r\n    }\r\n    RotationControl.prototype.componentDidMount = function () {\r\n        this.props.map.on('rotate', this.onMapRotate);\r\n    };\r\n    RotationControl.prototype.componentWillUnmount = function () {\r\n        this.props.map.off('rotate', this.onMapRotate);\r\n    };\r\n    RotationControl.prototype.render = function () {\r\n        var _a = this.props, position = _a.position, style = _a.style, className = _a.className, tabIndex = _a.tabIndex;\r\n        var hover = this.state.hover;\r\n        var controlStyle = __assign({}, buttonStyle, buttonStyleCompass, (hover === COMPASS ? buttonStyleHovered : {}));\r\n        return (React.createElement(\"div\", { className: className, tabIndex: tabIndex, style: __assign({}, containerStyle, positions[position], style) },\r\n            React.createElement(\"button\", { style: controlStyle, onMouseOver: this.onMouseIn, onMouseOut: this.onMouseOut, onClick: this.onClickCompass },\r\n                React.createElement(\"span\", { ref: this.assignRef, style: compassSpan },\r\n                    React.createElement(Icon, null)))));\r\n    };\r\n    RotationControl.defaultProps = {\r\n        position: POSITIONS[0]\r\n    };\r\n    return RotationControl;\r\n}(React.Component));\r\nexport { RotationControl };\r\nexport default withMap(RotationControl);\r\n//# sourceMappingURL=rotation-control.js.map"]},"metadata":{},"sourceType":"module"}