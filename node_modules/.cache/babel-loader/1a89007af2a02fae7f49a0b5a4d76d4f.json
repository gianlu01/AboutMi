{"ast":null,"code":"var Constants = require('../constants');\n\nvar featuresAt = require('../lib/features_at');\n\nvar Point = require('../feature_types/point');\n\nvar LineString = require('../feature_types/line_string');\n\nvar Polygon = require('../feature_types/polygon');\n\nvar MultiFeature = require('../feature_types/multi_feature');\n\nvar ModeInterface = module.exports = function (ctx) {\n  this.map = ctx.map;\n  this.drawConfig = JSON.parse(JSON.stringify(ctx.options || {}));\n  this._ctx = ctx;\n};\n/**\r\n * Sets Draw's interal selected state\r\n * @name this.setSelected\r\n * @param {DrawFeature[]} - whats selected as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n */\n\n\nModeInterface.prototype.setSelected = function (features) {\n  return this._ctx.store.setSelected(features);\n};\n/**\r\n * Sets Draw's internal selected coordinate state\r\n * @name this.setSelectedCoordinates\r\n * @param {Object[]} coords - a array of {coord_path: 'string', featureId: 'string'}\r\n */\n\n\nModeInterface.prototype.setSelectedCoordinates = function (coords) {\n  var _this = this;\n\n  this._ctx.store.setSelectedCoordinates(coords);\n\n  coords.reduce(function (m, c) {\n    if (m[c.feature_id] === undefined) {\n      m[c.feature_id] = true;\n\n      _this._ctx.store.get(c.feature_id).changed();\n    }\n\n    return m;\n  }, {});\n};\n/**\r\n * Get all selected features as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n * @name this.getSelected\r\n * @returns {DrawFeature[]}\r\n */\n\n\nModeInterface.prototype.getSelected = function () {\n  return this._ctx.store.getSelected();\n};\n/**\r\n * Get the ids of all currently selected features\r\n * @name this.getSelectedIds\r\n * @returns {String[]}\r\n */\n\n\nModeInterface.prototype.getSelectedIds = function () {\n  return this._ctx.store.getSelectedIds();\n};\n/**\r\n * Check if a feature is selected\r\n * @name this.isSelected\r\n * @param {String} id - a feature id\r\n * @returns {Boolean}\r\n */\n\n\nModeInterface.prototype.isSelected = function (id) {\n  return this._ctx.store.isSelected(id);\n};\n/**\r\n * Get a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) by its id\r\n * @name this.getFeature\r\n * @param {String} id - a feature id\r\n * @returns {DrawFeature}\r\n */\n\n\nModeInterface.prototype.getFeature = function (id) {\n  return this._ctx.store.get(id);\n};\n/**\r\n * Add a feature to draw's internal selected state\r\n * @name this.select\r\n * @param {String} id\r\n */\n\n\nModeInterface.prototype.select = function (id) {\n  return this._ctx.store.select(id);\n};\n/**\r\n * Remove a feature from draw's internal selected state\r\n * @name this.delete\r\n * @param {String} id\r\n */\n\n\nModeInterface.prototype.deselect = function (id) {\n  return this._ctx.store.deselect(id);\n};\n/**\r\n * Delete a feature from draw\r\n * @name this.deleteFeature\r\n * @param {String} id - a feature id\r\n */\n\n\nModeInterface.prototype.deleteFeature = function (id) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return this._ctx.store.delete(id, opts);\n};\n/**\r\n * Add a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) to draw.\r\n * See `this.newFeature` for converting geojson into a DrawFeature\r\n * @name this.addFeature\r\n * @param {DrawFeature} feature - the feature to add\r\n */\n\n\nModeInterface.prototype.addFeature = function (feature) {\n  return this._ctx.store.add(feature);\n};\n/**\r\n * Clear all selected features\r\n */\n\n\nModeInterface.prototype.clearSelectedFeatures = function () {\n  return this._ctx.store.clearSelected();\n};\n/**\r\n * Clear all selected coordinates\r\n */\n\n\nModeInterface.prototype.clearSelectedCoordinates = function () {\n  return this._ctx.store.clearSelectedCoordinates();\n};\n/**\r\n * Indicate if the different action are currently possible with your mode\r\n * See [draw.actionalbe](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#drawactionable) for a list of possible actions. All undefined actions are set to **false** by default\r\n * @name this.setActionableState\r\n * @param {Object} actions\r\n */\n\n\nModeInterface.prototype.setActionableState = function () {\n  var actions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var newSet = {\n    trash: actions.trash || false,\n    combineFeatures: actions.combineFeatures || false,\n    uncombineFeatures: actions.uncombineFeatures || false\n  };\n  return this._ctx.events.actionable(newSet);\n};\n/**\r\n * Trigger a mode change\r\n * @name this.changeMode\r\n * @param {String} mode - the mode to transition into\r\n * @param {Object} opts - the options object to pass to the new mode\r\n * @param {Object} eventOpts - used to control what kind of events are emitted.\r\n */\n\n\nModeInterface.prototype.changeMode = function (mode) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var eventOpts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return this._ctx.events.changeMode(mode, opts, eventOpts);\n};\n/**\r\n * Update the state of draw map classes\r\n * @name this.updateUIClasses\r\n * @param {Object} opts\r\n */\n\n\nModeInterface.prototype.updateUIClasses = function (opts) {\n  return this._ctx.ui.queueMapClasses(opts);\n};\n/**\r\n * If a name is provided it makes that button active, else if makes all buttons inactive\r\n * @name this.activateUIButton\r\n * @param {String?} name - name of the button to make active, leave as undefined to set buttons to be inactive\r\n */\n\n\nModeInterface.prototype.activateUIButton = function (name) {\n  return this._ctx.ui.setActiveButton(name);\n};\n/**\r\n * Get the features at the location of an event object or in a bbox\r\n * @name this.featuresAt\r\n * @param {Event||NULL} event - a mapbox-gl event object\r\n * @param {BBOX||NULL} bbox - the area to get features from\r\n * @param {String} bufferType - is this `click` or `tap` event, defaults to click\r\n */\n\n\nModeInterface.prototype.featuresAt = function (event, bbox) {\n  var bufferType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'click';\n  if (bufferType !== 'click' && bufferType !== 'touch') throw new Error('invalid buffer type');\n  return featuresAt[bufferType](event, bbox, this._ctx);\n};\n/**\r\n * Create a new [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) from geojson\r\n * @name this.newFeature\r\n * @param {GeoJSONFeature} geojson\r\n * @returns {DrawFeature}\r\n */\n\n\nModeInterface.prototype.newFeature = function (geojson) {\n  var type = geojson.geometry.type;\n  if (type === Constants.geojsonTypes.POINT) return new Point(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.LINE_STRING) return new LineString(this._ctx, geojson);\n  if (type === Constants.geojsonTypes.POLYGON) return new Polygon(this._ctx, geojson);\n  return new MultiFeature(this._ctx, geojson);\n};\n/**\r\n * Check is an object is an instance of a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n * @name this.isInstanceOf\r\n * @param {String} type - `Point`, `LineString`, `Polygon`, `MultiFeature`\r\n * @param {Object} feature - the object that needs to be checked\r\n * @returns {Boolean}\r\n */\n\n\nModeInterface.prototype.isInstanceOf = function (type, feature) {\n  if (type === Constants.geojsonTypes.POINT) return feature instanceof Point;\n  if (type === Constants.geojsonTypes.LINE_STRING) return feature instanceof LineString;\n  if (type === Constants.geojsonTypes.POLYGON) return feature instanceof Polygon;\n  if (type === 'MultiFeature') return feature instanceof MultiFeature;\n  throw new Error(\"Unknown feature class: \".concat(type));\n};\n/**\r\n * Force draw to rerender the feature of the provided id\r\n * @name this.doRender\r\n * @param {String} id - a feature id\r\n */\n\n\nModeInterface.prototype.doRender = function (id) {\n  return this._ctx.store.featureChanged(id);\n};","map":{"version":3,"sources":["C:/Users/michele/Desktop/IT/Code/react/aboutmi/node_modules/@mapbox/mapbox-gl-draw/src/modes/mode_interface_accessors.js"],"names":["Constants","require","featuresAt","Point","LineString","Polygon","MultiFeature","ModeInterface","module","exports","ctx","map","drawConfig","JSON","parse","stringify","options","_ctx","prototype","setSelected","features","store","setSelectedCoordinates","coords","reduce","m","c","feature_id","undefined","get","changed","getSelected","getSelectedIds","isSelected","id","getFeature","select","deselect","deleteFeature","opts","delete","addFeature","feature","add","clearSelectedFeatures","clearSelected","clearSelectedCoordinates","setActionableState","actions","newSet","trash","combineFeatures","uncombineFeatures","events","actionable","changeMode","mode","eventOpts","updateUIClasses","ui","queueMapClasses","activateUIButton","name","setActiveButton","event","bbox","bufferType","Error","newFeature","geojson","type","geometry","geojsonTypes","POINT","LINE_STRING","POLYGON","isInstanceOf","doRender","featureChanged"],"mappings":"AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,cAAD,CAAzB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,oBAAD,CAA1B;;AACA,IAAME,KAAK,GAAGF,OAAO,CAAC,wBAAD,CAArB;;AACA,IAAMG,UAAU,GAAGH,OAAO,CAAC,8BAAD,CAA1B;;AACA,IAAMI,OAAO,GAAGJ,OAAO,CAAC,0BAAD,CAAvB;;AACA,IAAMK,YAAY,GAAGL,OAAO,CAAC,gCAAD,CAA5B;;AAEA,IAAMM,aAAa,GAAGC,MAAM,CAACC,OAAP,GAAiB,UAASC,GAAT,EAAc;AACnD,OAAKC,GAAL,GAAWD,GAAG,CAACC,GAAf;AACA,OAAKC,UAAL,GAAkBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeL,GAAG,CAACM,OAAJ,IAAe,EAA9B,CAAX,CAAlB;AACA,OAAKC,IAAL,GAAYP,GAAZ;AACD,CAJD;AAMA;;;;;;;AAKAH,aAAa,CAACW,SAAd,CAAwBC,WAAxB,GAAsC,UAASC,QAAT,EAAmB;AACvD,SAAO,KAAKH,IAAL,CAAUI,KAAV,CAAgBF,WAAhB,CAA4BC,QAA5B,CAAP;AACD,CAFD;AAIA;;;;;;;AAKAb,aAAa,CAACW,SAAd,CAAwBI,sBAAxB,GAAiD,UAASC,MAAT,EAAiB;AAAA;;AAChE,OAAKN,IAAL,CAAUI,KAAV,CAAgBC,sBAAhB,CAAuCC,MAAvC;;AACAA,EAAAA,MAAM,CAACC,MAAP,CAAc,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACtB,QAAID,CAAC,CAACC,CAAC,CAACC,UAAH,CAAD,KAAoBC,SAAxB,EAAmC;AACjCH,MAAAA,CAAC,CAACC,CAAC,CAACC,UAAH,CAAD,GAAkB,IAAlB;;AACA,MAAA,KAAI,CAACV,IAAL,CAAUI,KAAV,CAAgBQ,GAAhB,CAAoBH,CAAC,CAACC,UAAtB,EAAkCG,OAAlC;AACD;;AACD,WAAOL,CAAP;AACD,GAND,EAMG,EANH;AAOD,CATD;AAWA;;;;;;;AAKAlB,aAAa,CAACW,SAAd,CAAwBa,WAAxB,GAAsC,YAAW;AAC/C,SAAO,KAAKd,IAAL,CAAUI,KAAV,CAAgBU,WAAhB,EAAP;AACD,CAFD;AAIA;;;;;;;AAKAxB,aAAa,CAACW,SAAd,CAAwBc,cAAxB,GAAyC,YAAW;AAClD,SAAO,KAAKf,IAAL,CAAUI,KAAV,CAAgBW,cAAhB,EAAP;AACD,CAFD;AAIA;;;;;;;;AAMAzB,aAAa,CAACW,SAAd,CAAwBe,UAAxB,GAAqC,UAASC,EAAT,EAAa;AAChD,SAAO,KAAKjB,IAAL,CAAUI,KAAV,CAAgBY,UAAhB,CAA2BC,EAA3B,CAAP;AACD,CAFD;AAIA;;;;;;;;AAMA3B,aAAa,CAACW,SAAd,CAAwBiB,UAAxB,GAAqC,UAASD,EAAT,EAAa;AAChD,SAAO,KAAKjB,IAAL,CAAUI,KAAV,CAAgBQ,GAAhB,CAAoBK,EAApB,CAAP;AACD,CAFD;AAIA;;;;;;;AAKA3B,aAAa,CAACW,SAAd,CAAwBkB,MAAxB,GAAiC,UAASF,EAAT,EAAa;AAC5C,SAAO,KAAKjB,IAAL,CAAUI,KAAV,CAAgBe,MAAhB,CAAuBF,EAAvB,CAAP;AACD,CAFD;AAIA;;;;;;;AAKA3B,aAAa,CAACW,SAAd,CAAwBmB,QAAxB,GAAmC,UAASH,EAAT,EAAa;AAC9C,SAAO,KAAKjB,IAAL,CAAUI,KAAV,CAAgBgB,QAAhB,CAAyBH,EAAzB,CAAP;AACD,CAFD;AAIA;;;;;;;AAKA3B,aAAa,CAACW,SAAd,CAAwBoB,aAAxB,GAAwC,UAASJ,EAAT,EAAwB;AAAA,MAAXK,IAAW,uEAAJ,EAAI;AAC9D,SAAO,KAAKtB,IAAL,CAAUI,KAAV,CAAgBmB,MAAhB,CAAuBN,EAAvB,EAA2BK,IAA3B,CAAP;AACD,CAFD;AAIA;;;;;;;;AAMAhC,aAAa,CAACW,SAAd,CAAwBuB,UAAxB,GAAqC,UAASC,OAAT,EAAkB;AACrD,SAAO,KAAKzB,IAAL,CAAUI,KAAV,CAAgBsB,GAAhB,CAAoBD,OAApB,CAAP;AACD,CAFD;AAIA;;;;;AAGAnC,aAAa,CAACW,SAAd,CAAwB0B,qBAAxB,GAAgD,YAAW;AACzD,SAAO,KAAK3B,IAAL,CAAUI,KAAV,CAAgBwB,aAAhB,EAAP;AACD,CAFD;AAIA;;;;;AAGAtC,aAAa,CAACW,SAAd,CAAwB4B,wBAAxB,GAAmD,YAAW;AAC5D,SAAO,KAAK7B,IAAL,CAAUI,KAAV,CAAgByB,wBAAhB,EAAP;AACD,CAFD;AAIA;;;;;;;;AAMAvC,aAAa,CAACW,SAAd,CAAwB6B,kBAAxB,GAA6C,YAAuB;AAAA,MAAdC,OAAc,uEAAJ,EAAI;AAClE,MAAMC,MAAM,GAAG;AACbC,IAAAA,KAAK,EAAEF,OAAO,CAACE,KAAR,IAAiB,KADX;AAEbC,IAAAA,eAAe,EAAEH,OAAO,CAACG,eAAR,IAA2B,KAF/B;AAGbC,IAAAA,iBAAiB,EAAEJ,OAAO,CAACI,iBAAR,IAA6B;AAHnC,GAAf;AAKA,SAAO,KAAKnC,IAAL,CAAUoC,MAAV,CAAiBC,UAAjB,CAA4BL,MAA5B,CAAP;AACD,CAPD;AASA;;;;;;;;;AAOA1C,aAAa,CAACW,SAAd,CAAwBqC,UAAxB,GAAqC,UAASC,IAAT,EAA0C;AAAA,MAA3BjB,IAA2B,uEAApB,EAAoB;AAAA,MAAhBkB,SAAgB,uEAAJ,EAAI;AAC7E,SAAO,KAAKxC,IAAL,CAAUoC,MAAV,CAAiBE,UAAjB,CAA4BC,IAA5B,EAAkCjB,IAAlC,EAAwCkB,SAAxC,CAAP;AACD,CAFD;AAIA;;;;;;;AAKAlD,aAAa,CAACW,SAAd,CAAwBwC,eAAxB,GAA0C,UAASnB,IAAT,EAAe;AACvD,SAAO,KAAKtB,IAAL,CAAU0C,EAAV,CAAaC,eAAb,CAA6BrB,IAA7B,CAAP;AACD,CAFD;AAIA;;;;;;;AAKAhC,aAAa,CAACW,SAAd,CAAwB2C,gBAAxB,GAA2C,UAASC,IAAT,EAAe;AACxD,SAAO,KAAK7C,IAAL,CAAU0C,EAAV,CAAaI,eAAb,CAA6BD,IAA7B,CAAP;AACD,CAFD;AAIA;;;;;;;;;AAOAvD,aAAa,CAACW,SAAd,CAAwBhB,UAAxB,GAAqC,UAAS8D,KAAT,EAAgBC,IAAhB,EAA4C;AAAA,MAAtBC,UAAsB,uEAAT,OAAS;AAC/E,MAAIA,UAAU,KAAK,OAAf,IAA0BA,UAAU,KAAK,OAA7C,EAAsD,MAAM,IAAIC,KAAJ,CAAU,qBAAV,CAAN;AACtD,SAAOjE,UAAU,CAACgE,UAAD,CAAV,CAAuBF,KAAvB,EAA8BC,IAA9B,EAAoC,KAAKhD,IAAzC,CAAP;AACD,CAHD;AAKA;;;;;;;;AAMAV,aAAa,CAACW,SAAd,CAAwBkD,UAAxB,GAAqC,UAASC,OAAT,EAAkB;AACrD,MAAMC,IAAI,GAAGD,OAAO,CAACE,QAAR,CAAiBD,IAA9B;AACA,MAAIA,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBC,KAApC,EAA2C,OAAO,IAAItE,KAAJ,CAAU,KAAKc,IAAf,EAAqBoD,OAArB,CAAP;AAC3C,MAAIC,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBE,WAApC,EAAiD,OAAO,IAAItE,UAAJ,CAAe,KAAKa,IAApB,EAA0BoD,OAA1B,CAAP;AACjD,MAAIC,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBG,OAApC,EAA6C,OAAO,IAAItE,OAAJ,CAAY,KAAKY,IAAjB,EAAuBoD,OAAvB,CAAP;AAC7C,SAAO,IAAI/D,YAAJ,CAAiB,KAAKW,IAAtB,EAA4BoD,OAA5B,CAAP;AACD,CAND;AAQA;;;;;;;;;AAOA9D,aAAa,CAACW,SAAd,CAAwB0D,YAAxB,GAAuC,UAASN,IAAT,EAAe5B,OAAf,EAAwB;AAC7D,MAAI4B,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBC,KAApC,EAA2C,OAAO/B,OAAO,YAAYvC,KAA1B;AAC3C,MAAImE,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBE,WAApC,EAAiD,OAAOhC,OAAO,YAAYtC,UAA1B;AACjD,MAAIkE,IAAI,KAAKtE,SAAS,CAACwE,YAAV,CAAuBG,OAApC,EAA6C,OAAOjC,OAAO,YAAYrC,OAA1B;AAC7C,MAAIiE,IAAI,KAAK,cAAb,EAA6B,OAAO5B,OAAO,YAAYpC,YAA1B;AAC7B,QAAM,IAAI6D,KAAJ,kCAAoCG,IAApC,EAAN;AACD,CAND;AAQA;;;;;;;AAKA/D,aAAa,CAACW,SAAd,CAAwB2D,QAAxB,GAAmC,UAAS3C,EAAT,EAAa;AAC9C,SAAO,KAAKjB,IAAL,CAAUI,KAAV,CAAgByD,cAAhB,CAA+B5C,EAA/B,CAAP;AACD,CAFD","sourcesContent":["const Constants = require('../constants');\r\nconst featuresAt = require('../lib/features_at');\r\nconst Point = require('../feature_types/point');\r\nconst LineString = require('../feature_types/line_string');\r\nconst Polygon = require('../feature_types/polygon');\r\nconst MultiFeature = require('../feature_types/multi_feature');\r\n\r\nconst ModeInterface = module.exports = function(ctx) {\r\n  this.map = ctx.map;\r\n  this.drawConfig = JSON.parse(JSON.stringify(ctx.options || {}));\r\n  this._ctx = ctx;\r\n};\r\n\r\n/**\r\n * Sets Draw's interal selected state\r\n * @name this.setSelected\r\n * @param {DrawFeature[]} - whats selected as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n */\r\nModeInterface.prototype.setSelected = function(features) {\r\n  return this._ctx.store.setSelected(features);\r\n};\r\n\r\n/**\r\n * Sets Draw's internal selected coordinate state\r\n * @name this.setSelectedCoordinates\r\n * @param {Object[]} coords - a array of {coord_path: 'string', featureId: 'string'}\r\n */\r\nModeInterface.prototype.setSelectedCoordinates = function(coords) {\r\n  this._ctx.store.setSelectedCoordinates(coords);\r\n  coords.reduce((m, c) => {\r\n    if (m[c.feature_id] === undefined) {\r\n      m[c.feature_id] = true;\r\n      this._ctx.store.get(c.feature_id).changed();\r\n    }\r\n    return m;\r\n  }, {});\r\n};\r\n\r\n/**\r\n * Get all selected features as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n * @name this.getSelected\r\n * @returns {DrawFeature[]}\r\n */\r\nModeInterface.prototype.getSelected = function() {\r\n  return this._ctx.store.getSelected();\r\n};\r\n\r\n/**\r\n * Get the ids of all currently selected features\r\n * @name this.getSelectedIds\r\n * @returns {String[]}\r\n */\r\nModeInterface.prototype.getSelectedIds = function() {\r\n  return this._ctx.store.getSelectedIds();\r\n};\r\n\r\n/**\r\n * Check if a feature is selected\r\n * @name this.isSelected\r\n * @param {String} id - a feature id\r\n * @returns {Boolean}\r\n */\r\nModeInterface.prototype.isSelected = function(id) {\r\n  return this._ctx.store.isSelected(id);\r\n};\r\n\r\n/**\r\n * Get a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) by its id\r\n * @name this.getFeature\r\n * @param {String} id - a feature id\r\n * @returns {DrawFeature}\r\n */\r\nModeInterface.prototype.getFeature = function(id) {\r\n  return this._ctx.store.get(id);\r\n};\r\n\r\n/**\r\n * Add a feature to draw's internal selected state\r\n * @name this.select\r\n * @param {String} id\r\n */\r\nModeInterface.prototype.select = function(id) {\r\n  return this._ctx.store.select(id);\r\n};\r\n\r\n/**\r\n * Remove a feature from draw's internal selected state\r\n * @name this.delete\r\n * @param {String} id\r\n */\r\nModeInterface.prototype.deselect = function(id) {\r\n  return this._ctx.store.deselect(id);\r\n};\r\n\r\n/**\r\n * Delete a feature from draw\r\n * @name this.deleteFeature\r\n * @param {String} id - a feature id\r\n */\r\nModeInterface.prototype.deleteFeature = function(id, opts = {}) {\r\n  return this._ctx.store.delete(id, opts);\r\n};\r\n\r\n/**\r\n * Add a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) to draw.\r\n * See `this.newFeature` for converting geojson into a DrawFeature\r\n * @name this.addFeature\r\n * @param {DrawFeature} feature - the feature to add\r\n */\r\nModeInterface.prototype.addFeature = function(feature) {\r\n  return this._ctx.store.add(feature);\r\n};\r\n\r\n/**\r\n * Clear all selected features\r\n */\r\nModeInterface.prototype.clearSelectedFeatures = function() {\r\n  return this._ctx.store.clearSelected();\r\n};\r\n\r\n/**\r\n * Clear all selected coordinates\r\n */\r\nModeInterface.prototype.clearSelectedCoordinates = function() {\r\n  return this._ctx.store.clearSelectedCoordinates();\r\n};\r\n\r\n/**\r\n * Indicate if the different action are currently possible with your mode\r\n * See [draw.actionalbe](https://github.com/mapbox/mapbox-gl-draw/blob/master/API.md#drawactionable) for a list of possible actions. All undefined actions are set to **false** by default\r\n * @name this.setActionableState\r\n * @param {Object} actions\r\n */\r\nModeInterface.prototype.setActionableState = function(actions = {}) {\r\n  const newSet = {\r\n    trash: actions.trash || false,\r\n    combineFeatures: actions.combineFeatures || false,\r\n    uncombineFeatures: actions.uncombineFeatures || false\r\n  };\r\n  return this._ctx.events.actionable(newSet);\r\n};\r\n\r\n/**\r\n * Trigger a mode change\r\n * @name this.changeMode\r\n * @param {String} mode - the mode to transition into\r\n * @param {Object} opts - the options object to pass to the new mode\r\n * @param {Object} eventOpts - used to control what kind of events are emitted.\r\n */\r\nModeInterface.prototype.changeMode = function(mode, opts = {}, eventOpts = {}) {\r\n  return this._ctx.events.changeMode(mode, opts, eventOpts);\r\n};\r\n\r\n/**\r\n * Update the state of draw map classes\r\n * @name this.updateUIClasses\r\n * @param {Object} opts\r\n */\r\nModeInterface.prototype.updateUIClasses = function(opts) {\r\n  return this._ctx.ui.queueMapClasses(opts);\r\n};\r\n\r\n/**\r\n * If a name is provided it makes that button active, else if makes all buttons inactive\r\n * @name this.activateUIButton\r\n * @param {String?} name - name of the button to make active, leave as undefined to set buttons to be inactive\r\n */\r\nModeInterface.prototype.activateUIButton = function(name) {\r\n  return this._ctx.ui.setActiveButton(name);\r\n};\r\n\r\n/**\r\n * Get the features at the location of an event object or in a bbox\r\n * @name this.featuresAt\r\n * @param {Event||NULL} event - a mapbox-gl event object\r\n * @param {BBOX||NULL} bbox - the area to get features from\r\n * @param {String} bufferType - is this `click` or `tap` event, defaults to click\r\n */\r\nModeInterface.prototype.featuresAt = function(event, bbox, bufferType = 'click') {\r\n  if (bufferType !== 'click' && bufferType !== 'touch') throw new Error('invalid buffer type');\r\n  return featuresAt[bufferType](event, bbox, this._ctx);\r\n};\r\n\r\n/**\r\n * Create a new [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js) from geojson\r\n * @name this.newFeature\r\n * @param {GeoJSONFeature} geojson\r\n * @returns {DrawFeature}\r\n */\r\nModeInterface.prototype.newFeature = function(geojson) {\r\n  const type = geojson.geometry.type;\r\n  if (type === Constants.geojsonTypes.POINT) return new Point(this._ctx, geojson);\r\n  if (type === Constants.geojsonTypes.LINE_STRING) return new LineString(this._ctx, geojson);\r\n  if (type === Constants.geojsonTypes.POLYGON) return new Polygon(this._ctx, geojson);\r\n  return new MultiFeature(this._ctx, geojson);\r\n};\r\n\r\n/**\r\n * Check is an object is an instance of a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/master/src/feature_types/feature.js)\r\n * @name this.isInstanceOf\r\n * @param {String} type - `Point`, `LineString`, `Polygon`, `MultiFeature`\r\n * @param {Object} feature - the object that needs to be checked\r\n * @returns {Boolean}\r\n */\r\nModeInterface.prototype.isInstanceOf = function(type, feature) {\r\n  if (type === Constants.geojsonTypes.POINT) return feature instanceof Point;\r\n  if (type === Constants.geojsonTypes.LINE_STRING) return feature instanceof LineString;\r\n  if (type === Constants.geojsonTypes.POLYGON) return feature instanceof Polygon;\r\n  if (type === 'MultiFeature') return feature instanceof MultiFeature;\r\n  throw new Error(`Unknown feature class: ${type}`);\r\n};\r\n\r\n/**\r\n * Force draw to rerender the feature of the provided id\r\n * @name this.doRender\r\n * @param {String} id - a feature id\r\n */\r\nModeInterface.prototype.doRender = function(id) {\r\n  return this._ctx.store.featureChanged(id);\r\n};\r\n\r\n"]},"metadata":{},"sourceType":"script"}