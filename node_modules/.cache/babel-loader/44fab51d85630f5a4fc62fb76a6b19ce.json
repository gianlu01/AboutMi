{"ast":null,"code":"var extent = require('@mapbox/geojson-extent');\n\nvar Constants = require('../constants');\n\nvar LAT_MIN = Constants.LAT_MIN,\n    LAT_MAX = Constants.LAT_MAX,\n    LAT_RENDERED_MIN = Constants.LAT_RENDERED_MIN,\n    LAT_RENDERED_MAX = Constants.LAT_RENDERED_MAX,\n    LNG_MIN = Constants.LNG_MIN,\n    LNG_MAX = Constants.LNG_MAX; // Ensure that we do not drag north-south far enough for\n// - any part of any feature to exceed the poles\n// - any feature to be completely lost in the space between the projection's\n//   edge and the poles, such that it couldn't be re-selected and moved back\n\nmodule.exports = function (geojsonFeatures, delta) {\n  // \"inner edge\" = a feature's latitude closest to the equator\n  var northInnerEdge = LAT_MIN;\n  var southInnerEdge = LAT_MAX; // \"outer edge\" = a feature's latitude furthest from the equator\n\n  var northOuterEdge = LAT_MIN;\n  var southOuterEdge = LAT_MAX;\n  var westEdge = LNG_MAX;\n  var eastEdge = LNG_MIN;\n  geojsonFeatures.forEach(function (feature) {\n    var bounds = extent(feature);\n    var featureSouthEdge = bounds[1];\n    var featureNorthEdge = bounds[3];\n    var featureWestEdge = bounds[0];\n    var featureEastEdge = bounds[2];\n    if (featureSouthEdge > northInnerEdge) northInnerEdge = featureSouthEdge;\n    if (featureNorthEdge < southInnerEdge) southInnerEdge = featureNorthEdge;\n    if (featureNorthEdge > northOuterEdge) northOuterEdge = featureNorthEdge;\n    if (featureSouthEdge < southOuterEdge) southOuterEdge = featureSouthEdge;\n    if (featureWestEdge < westEdge) westEdge = featureWestEdge;\n    if (featureEastEdge > eastEdge) eastEdge = featureEastEdge;\n  }); // These changes are not mutually exclusive: we might hit the inner\n  // edge but also have hit the outer edge and therefore need\n  // another readjustment\n\n  var constrainedDelta = delta;\n\n  if (northInnerEdge + constrainedDelta.lat > LAT_RENDERED_MAX) {\n    constrainedDelta.lat = LAT_RENDERED_MAX - northInnerEdge;\n  }\n\n  if (northOuterEdge + constrainedDelta.lat > LAT_MAX) {\n    constrainedDelta.lat = LAT_MAX - northOuterEdge;\n  }\n\n  if (southInnerEdge + constrainedDelta.lat < LAT_RENDERED_MIN) {\n    constrainedDelta.lat = LAT_RENDERED_MIN - southInnerEdge;\n  }\n\n  if (southOuterEdge + constrainedDelta.lat < LAT_MIN) {\n    constrainedDelta.lat = LAT_MIN - southOuterEdge;\n  }\n\n  if (westEdge + constrainedDelta.lng <= LNG_MIN) {\n    constrainedDelta.lng += Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n\n  if (eastEdge + constrainedDelta.lng >= LNG_MAX) {\n    constrainedDelta.lng -= Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n\n  return constrainedDelta;\n};","map":{"version":3,"sources":["C:/Users/michele/Desktop/IT/Code/react/aboutmi/node_modules/@mapbox/mapbox-gl-draw/src/lib/constrain_feature_movement.js"],"names":["extent","require","Constants","LAT_MIN","LAT_MAX","LAT_RENDERED_MIN","LAT_RENDERED_MAX","LNG_MIN","LNG_MAX","module","exports","geojsonFeatures","delta","northInnerEdge","southInnerEdge","northOuterEdge","southOuterEdge","westEdge","eastEdge","forEach","feature","bounds","featureSouthEdge","featureNorthEdge","featureWestEdge","featureEastEdge","constrainedDelta","lat","lng","Math","ceil","abs"],"mappings":"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","sourcesContent":["const extent = require('@mapbox/geojson-extent');\r\nconst Constants = require('../constants');\r\n\r\nconst {\r\n  LAT_MIN,\r\n  LAT_MAX,\r\n  LAT_RENDERED_MIN,\r\n  LAT_RENDERED_MAX,\r\n  LNG_MIN,\r\n  LNG_MAX\r\n} = Constants;\r\n\r\n// Ensure that we do not drag north-south far enough for\r\n// - any part of any feature to exceed the poles\r\n// - any feature to be completely lost in the space between the projection's\r\n//   edge and the poles, such that it couldn't be re-selected and moved back\r\nmodule.exports = function(geojsonFeatures, delta) {\r\n  // \"inner edge\" = a feature's latitude closest to the equator\r\n  let northInnerEdge = LAT_MIN;\r\n  let southInnerEdge = LAT_MAX;\r\n  // \"outer edge\" = a feature's latitude furthest from the equator\r\n  let northOuterEdge = LAT_MIN;\r\n  let southOuterEdge = LAT_MAX;\r\n\r\n  let westEdge = LNG_MAX;\r\n  let eastEdge = LNG_MIN;\r\n\r\n  geojsonFeatures.forEach(feature => {\r\n    const bounds = extent(feature);\r\n    const featureSouthEdge = bounds[1];\r\n    const featureNorthEdge = bounds[3];\r\n    const featureWestEdge = bounds[0];\r\n    const featureEastEdge = bounds[2];\r\n    if (featureSouthEdge > northInnerEdge) northInnerEdge = featureSouthEdge;\r\n    if (featureNorthEdge < southInnerEdge) southInnerEdge = featureNorthEdge;\r\n    if (featureNorthEdge > northOuterEdge) northOuterEdge = featureNorthEdge;\r\n    if (featureSouthEdge < southOuterEdge) southOuterEdge = featureSouthEdge;\r\n    if (featureWestEdge < westEdge) westEdge = featureWestEdge;\r\n    if (featureEastEdge > eastEdge) eastEdge = featureEastEdge;\r\n  });\r\n\r\n\r\n  // These changes are not mutually exclusive: we might hit the inner\r\n  // edge but also have hit the outer edge and therefore need\r\n  // another readjustment\r\n  const constrainedDelta = delta;\r\n  if (northInnerEdge + constrainedDelta.lat > LAT_RENDERED_MAX) {\r\n    constrainedDelta.lat = LAT_RENDERED_MAX - northInnerEdge;\r\n  }\r\n  if (northOuterEdge + constrainedDelta.lat > LAT_MAX) {\r\n    constrainedDelta.lat = LAT_MAX - northOuterEdge;\r\n  }\r\n  if (southInnerEdge + constrainedDelta.lat < LAT_RENDERED_MIN) {\r\n    constrainedDelta.lat = LAT_RENDERED_MIN - southInnerEdge;\r\n  }\r\n  if (southOuterEdge + constrainedDelta.lat < LAT_MIN) {\r\n    constrainedDelta.lat = LAT_MIN - southOuterEdge;\r\n  }\r\n  if (westEdge + constrainedDelta.lng <= LNG_MIN) {\r\n    constrainedDelta.lng += Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\r\n  }\r\n  if (eastEdge + constrainedDelta.lng >= LNG_MAX) {\r\n    constrainedDelta.lng -= Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\r\n  }\r\n\r\n  return constrainedDelta;\r\n};\r\n"]},"metadata":{},"sourceType":"script"}