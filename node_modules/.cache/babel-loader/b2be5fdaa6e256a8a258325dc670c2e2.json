{"ast":null,"code":"var rightHandRule = require('./rhr');\n/**\n * @alias geojsonhint\n * @param {(string|object)} GeoJSON given as a string or as an object\n * @param {Object} options\n * @param {boolean} [options.noDuplicateMembers=true] forbid repeated\n * properties. This is only available for string input, becaused parsed\n * Objects cannot have duplicate properties.\n * @param {boolean} [options.precisionWarning=true] warn if GeoJSON contains\n * unnecessary coordinate precision.\n * @returns {Array<Object>} an array of errors\n */\n\n\nfunction hint(gj, options) {\n  var errors = [];\n  var precisionWarningCount = 0;\n  var maxPrecisionWarnings = 10;\n  var maxPrecision = 6;\n\n  function root(_) {\n    if ((!options || options.noDuplicateMembers !== false) && _.__duplicateProperties__) {\n      errors.push({\n        message: 'An object contained duplicate members, making parsing ambigous: ' + _.__duplicateProperties__.join(', '),\n        line: _.__line__\n      });\n    }\n\n    if (requiredProperty(_, 'type', 'string')) {\n      return;\n    }\n\n    if (!types[_.type]) {\n      var expectedType = typesLower[_.type.toLowerCase()];\n\n      if (expectedType !== undefined) {\n        errors.push({\n          message: 'Expected ' + expectedType + ' but got ' + _.type + ' (case sensitive)',\n          line: _.__line__\n        });\n      } else {\n        errors.push({\n          message: 'The type ' + _.type + ' is unknown',\n          line: _.__line__\n        });\n      }\n    } else if (_) {\n      types[_.type](_);\n    }\n  }\n\n  function everyIs(_, type) {\n    // make a single exception because typeof null === 'object'\n    return _.every(function (x) {\n      return x !== null && typeof x === type;\n    });\n  }\n\n  function requiredProperty(_, name, type) {\n    if (typeof _[name] === 'undefined') {\n      return errors.push({\n        message: '\"' + name + '\" member required',\n        line: _.__line__\n      });\n    } else if (type === 'array') {\n      if (!Array.isArray(_[name])) {\n        return errors.push({\n          message: '\"' + name + '\" member should be an array, but is an ' + typeof _[name] + ' instead',\n          line: _.__line__\n        });\n      }\n    } else if (type === 'object' && _[name] && _[name].constructor !== Object) {\n      return errors.push({\n        message: '\"' + name + '\" member should be ' + type + ', but is an ' + _[name].constructor.name + ' instead',\n        line: _.__line__\n      });\n    } else if (type && typeof _[name] !== type) {\n      return errors.push({\n        message: '\"' + name + '\" member should be ' + type + ', but is an ' + typeof _[name] + ' instead',\n        line: _.__line__\n      });\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.3\n\n\n  function FeatureCollection(featureCollection) {\n    crs(featureCollection);\n    bbox(featureCollection);\n\n    if (featureCollection.properties !== undefined) {\n      errors.push({\n        message: 'FeatureCollection object cannot contain a \"properties\" member',\n        line: featureCollection.__line__\n      });\n    }\n\n    if (featureCollection.coordinates !== undefined) {\n      errors.push({\n        message: 'FeatureCollection object cannot contain a \"coordinates\" member',\n        line: featureCollection.__line__\n      });\n    }\n\n    if (!requiredProperty(featureCollection, 'features', 'array')) {\n      if (!everyIs(featureCollection.features, 'object')) {\n        return errors.push({\n          message: 'Every feature must be an object',\n          line: featureCollection.__line__\n        });\n      }\n\n      featureCollection.features.forEach(Feature);\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.1\n\n\n  function position(_, line) {\n    if (!Array.isArray(_)) {\n      return errors.push({\n        message: 'position should be an array, is a ' + typeof _ + ' instead',\n        line: _.__line__ || line\n      });\n    }\n\n    if (_.length < 2) {\n      return errors.push({\n        message: 'position must have 2 or more elements',\n        line: _.__line__ || line\n      });\n    }\n\n    if (_.length > 3) {\n      return errors.push({\n        message: 'position should not have more than 3 elements',\n        level: 'message',\n        line: _.__line__ || line\n      });\n    }\n\n    if (!everyIs(_, 'number')) {\n      return errors.push({\n        message: 'each element in a position must be a number',\n        line: _.__line__ || line\n      });\n    }\n\n    if (options && options.precisionWarning) {\n      if (precisionWarningCount === maxPrecisionWarnings) {\n        precisionWarningCount += 1;\n        return errors.push({\n          message: 'truncated warnings: we\\'ve encountered coordinate precision warning ' + maxPrecisionWarnings + ' times, no more warnings will be reported',\n          level: 'message',\n          line: _.__line__ || line\n        });\n      } else if (precisionWarningCount < maxPrecisionWarnings) {\n        _.forEach(function (num) {\n          var precision = 0;\n          var decimalStr = String(num).split('.')[1];\n          if (decimalStr !== undefined) precision = decimalStr.length;\n\n          if (precision > maxPrecision) {\n            precisionWarningCount += 1;\n            return errors.push({\n              message: 'precision of coordinates should be reduced',\n              level: 'message',\n              line: _.__line__ || line\n            });\n          }\n        });\n      }\n    }\n  }\n\n  function positionArray(coords, type, depth, line) {\n    if (line === undefined && coords.__line__ !== undefined) {\n      line = coords.__line__;\n    }\n\n    if (depth === 0) {\n      return position(coords, line);\n    }\n\n    if (depth === 1 && type) {\n      if (type === 'LinearRing') {\n        if (!Array.isArray(coords[coords.length - 1])) {\n          errors.push({\n            message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n            line: line\n          });\n          return true;\n        }\n\n        if (coords.length < 4) {\n          errors.push({\n            message: 'a LinearRing of coordinates needs to have four or more positions',\n            line: line\n          });\n        }\n\n        if (coords.length && (coords[coords.length - 1].length !== coords[0].length || !coords[coords.length - 1].every(function (pos, index) {\n          return coords[0][index] === pos;\n        }))) {\n          errors.push({\n            message: 'the first and last positions in a LinearRing of coordinates must be the same',\n            line: line\n          });\n          return true;\n        }\n      } else if (type === 'Line' && coords.length < 2) {\n        return errors.push({\n          message: 'a line needs to have two or more coordinates to be valid',\n          line: line\n        });\n      }\n    }\n\n    if (!Array.isArray(coords)) {\n      errors.push({\n        message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n        line: line\n      });\n    } else {\n      var results = coords.map(function (c) {\n        return positionArray(c, type, depth - 1, c.__line__ || line);\n      });\n      return results.some(function (r) {\n        return r;\n      });\n    }\n  }\n\n  function crs(_) {\n    if (!_.crs) return;\n    var defaultCRSName = 'urn:ogc:def:crs:OGC:1.3:CRS84';\n\n    if (typeof _.crs === 'object' && _.crs.properties && _.crs.properties.name === defaultCRSName) {\n      errors.push({\n        message: 'old-style crs member is not recommended, this object is equivalent to the default and should be removed',\n        line: _.__line__\n      });\n    } else {\n      errors.push({\n        message: 'old-style crs member is not recommended',\n        line: _.__line__\n      });\n    }\n  }\n\n  function bbox(_) {\n    if (!_.bbox) {\n      return;\n    }\n\n    if (Array.isArray(_.bbox)) {\n      if (!everyIs(_.bbox, 'number')) {\n        errors.push({\n          message: 'each element in a bbox member must be a number',\n          line: _.bbox.__line__\n        });\n      }\n\n      if (!(_.bbox.length === 4 || _.bbox.length === 6)) {\n        errors.push({\n          message: 'bbox must contain 4 elements (for 2D) or 6 elements (for 3D)',\n          line: _.bbox.__line__\n        });\n      }\n\n      return errors.length;\n    }\n\n    errors.push({\n      message: 'bbox member must be an array of numbers, but is a ' + typeof _.bbox,\n      line: _.__line__\n    });\n  }\n\n  function geometrySemantics(geom) {\n    if (geom.properties !== undefined) {\n      errors.push({\n        message: 'geometry object cannot contain a \"properties\" member',\n        line: geom.__line__\n      });\n    }\n\n    if (geom.geometry !== undefined) {\n      errors.push({\n        message: 'geometry object cannot contain a \"geometry\" member',\n        line: geom.__line__\n      });\n    }\n\n    if (geom.features !== undefined) {\n      errors.push({\n        message: 'geometry object cannot contain a \"features\" member',\n        line: geom.__line__\n      });\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.2\n\n\n  function Point(point) {\n    crs(point);\n    bbox(point);\n    geometrySemantics(point);\n\n    if (!requiredProperty(point, 'coordinates', 'array')) {\n      position(point.coordinates);\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.6\n\n\n  function Polygon(polygon) {\n    crs(polygon);\n    bbox(polygon);\n\n    if (!requiredProperty(polygon, 'coordinates', 'array')) {\n      if (!positionArray(polygon.coordinates, 'LinearRing', 2)) {\n        rightHandRule(polygon, errors);\n      }\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.7\n\n\n  function MultiPolygon(multiPolygon) {\n    crs(multiPolygon);\n    bbox(multiPolygon);\n\n    if (!requiredProperty(multiPolygon, 'coordinates', 'array')) {\n      if (!positionArray(multiPolygon.coordinates, 'LinearRing', 3)) {\n        rightHandRule(multiPolygon, errors);\n      }\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.4\n\n\n  function LineString(lineString) {\n    crs(lineString);\n    bbox(lineString);\n\n    if (!requiredProperty(lineString, 'coordinates', 'array')) {\n      positionArray(lineString.coordinates, 'Line', 1);\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.5\n\n\n  function MultiLineString(multiLineString) {\n    crs(multiLineString);\n    bbox(multiLineString);\n\n    if (!requiredProperty(multiLineString, 'coordinates', 'array')) {\n      positionArray(multiLineString.coordinates, 'Line', 2);\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.3\n\n\n  function MultiPoint(multiPoint) {\n    crs(multiPoint);\n    bbox(multiPoint);\n\n    if (!requiredProperty(multiPoint, 'coordinates', 'array')) {\n      positionArray(multiPoint.coordinates, '', 1);\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.1.8\n\n\n  function GeometryCollection(geometryCollection) {\n    crs(geometryCollection);\n    bbox(geometryCollection);\n\n    if (!requiredProperty(geometryCollection, 'geometries', 'array')) {\n      if (!everyIs(geometryCollection.geometries, 'object')) {\n        errors.push({\n          message: 'The geometries array in a GeometryCollection must contain only geometry objects',\n          line: geometryCollection.__line__\n        });\n      }\n\n      if (geometryCollection.geometries.length === 1) {\n        errors.push({\n          message: 'GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type',\n          line: geometryCollection.geometries.__line__\n        });\n      }\n\n      geometryCollection.geometries.forEach(function (geometry) {\n        if (geometry) {\n          if (geometry.type === 'GeometryCollection') {\n            errors.push({\n              message: 'GeometryCollection should avoid nested geometry collections',\n              line: geometryCollection.geometries.__line__\n            });\n          }\n\n          root(geometry);\n        }\n      });\n    }\n  } // https://tools.ietf.org/html/rfc7946#section-3.2\n\n\n  function Feature(feature) {\n    crs(feature);\n    bbox(feature); // https://github.com/geojson/draft-geojson/blob/master/middle.mkd#feature-object\n\n    if (feature.id !== undefined && typeof feature.id !== 'string' && typeof feature.id !== 'number') {\n      errors.push({\n        message: 'Feature \"id\" member must have a string or number value',\n        line: feature.__line__\n      });\n    }\n\n    if (feature.features !== undefined) {\n      errors.push({\n        message: 'Feature object cannot contain a \"features\" member',\n        line: feature.__line__\n      });\n    }\n\n    if (feature.coordinates !== undefined) {\n      errors.push({\n        message: 'Feature object cannot contain a \"coordinates\" member',\n        line: feature.__line__\n      });\n    }\n\n    if (feature.type !== 'Feature') {\n      errors.push({\n        message: 'GeoJSON features must have a type=feature member',\n        line: feature.__line__\n      });\n    }\n\n    requiredProperty(feature, 'properties', 'object');\n\n    if (!requiredProperty(feature, 'geometry', 'object')) {\n      // https://tools.ietf.org/html/rfc7946#section-3.2\n      // tolerate null geometry\n      if (feature.geometry) root(feature.geometry);\n    }\n  }\n\n  var types = {\n    Point: Point,\n    Feature: Feature,\n    MultiPoint: MultiPoint,\n    LineString: LineString,\n    MultiLineString: MultiLineString,\n    FeatureCollection: FeatureCollection,\n    GeometryCollection: GeometryCollection,\n    Polygon: Polygon,\n    MultiPolygon: MultiPolygon\n  };\n  var typesLower = Object.keys(types).reduce(function (prev, curr) {\n    prev[curr.toLowerCase()] = curr;\n    return prev;\n  }, {});\n\n  if (typeof gj !== 'object' || gj === null || gj === undefined) {\n    errors.push({\n      message: 'The root of a GeoJSON object must be an object.',\n      line: 0\n    });\n    return errors;\n  }\n\n  root(gj);\n  errors.forEach(function (err) {\n    if ({}.hasOwnProperty.call(err, 'line') && err.line === undefined) {\n      delete err.line;\n    }\n  });\n  return errors;\n}\n\nmodule.exports.hint = hint;","map":{"version":3,"sources":["/home/gianluca/Documenti/Scuola/Informatica/Progetto/AboutMi/node_modules/@mapbox/geojsonhint/lib/object.js"],"names":["rightHandRule","require","hint","gj","options","errors","precisionWarningCount","maxPrecisionWarnings","maxPrecision","root","_","noDuplicateMembers","__duplicateProperties__","push","message","join","line","__line__","requiredProperty","types","type","expectedType","typesLower","toLowerCase","undefined","everyIs","every","x","name","Array","isArray","constructor","Object","FeatureCollection","featureCollection","crs","bbox","properties","coordinates","features","forEach","Feature","position","length","level","precisionWarning","num","precision","decimalStr","String","split","positionArray","coords","depth","pos","index","results","map","c","some","r","defaultCRSName","geometrySemantics","geom","geometry","Point","point","Polygon","polygon","MultiPolygon","multiPolygon","LineString","lineString","MultiLineString","multiLineString","MultiPoint","multiPoint","GeometryCollection","geometryCollection","geometries","feature","id","keys","reduce","prev","curr","err","hasOwnProperty","call","module","exports"],"mappings":"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","sourcesContent":["var rightHandRule = require('./rhr');\n\n/**\n * @alias geojsonhint\n * @param {(string|object)} GeoJSON given as a string or as an object\n * @param {Object} options\n * @param {boolean} [options.noDuplicateMembers=true] forbid repeated\n * properties. This is only available for string input, becaused parsed\n * Objects cannot have duplicate properties.\n * @param {boolean} [options.precisionWarning=true] warn if GeoJSON contains\n * unnecessary coordinate precision.\n * @returns {Array<Object>} an array of errors\n */\nfunction hint(gj, options) {\n\n    var errors = [];\n    var precisionWarningCount = 0;\n    var maxPrecisionWarnings = 10;\n    var maxPrecision = 6;\n\n    function root(_) {\n\n        if ((!options || options.noDuplicateMembers !== false) &&\n           _.__duplicateProperties__) {\n            errors.push({\n                message: 'An object contained duplicate members, making parsing ambigous: ' + _.__duplicateProperties__.join(', '),\n                line: _.__line__\n            });\n        }\n\n        if (requiredProperty(_, 'type', 'string')) {\n            return;\n        }\n\n        if (!types[_.type]) {\n            var expectedType = typesLower[_.type.toLowerCase()];\n            if (expectedType !== undefined) {\n                errors.push({\n                    message: 'Expected ' + expectedType + ' but got ' + _.type + ' (case sensitive)',\n                    line: _.__line__\n                });\n            } else {\n                errors.push({\n                    message: 'The type ' + _.type + ' is unknown',\n                    line: _.__line__\n                });\n            }\n        } else if (_) {\n            types[_.type](_);\n        }\n    }\n\n    function everyIs(_, type) {\n        // make a single exception because typeof null === 'object'\n        return _.every(function(x) {\n            return x !== null && typeof x === type;\n        });\n    }\n\n    function requiredProperty(_, name, type) {\n        if (typeof _[name] === 'undefined') {\n            return errors.push({\n                message: '\"' + name + '\" member required',\n                line: _.__line__\n            });\n        } else if (type === 'array') {\n            if (!Array.isArray(_[name])) {\n                return errors.push({\n                    message: '\"' + name +\n                        '\" member should be an array, but is an ' +\n                        (typeof _[name]) + ' instead',\n                    line: _.__line__\n                });\n            }\n        } else if (type === 'object' && _[name] && _[name].constructor !== Object) {\n            return errors.push({\n                message: '\"' + name +\n                    '\" member should be ' + (type) +\n                    ', but is an ' + (_[name].constructor.name) + ' instead',\n                line: _.__line__\n            });\n        } else if (type && typeof _[name] !== type) {\n            return errors.push({\n                message: '\"' + name +\n                    '\" member should be ' + (type) +\n                    ', but is an ' + (typeof _[name]) + ' instead',\n                line: _.__line__\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.3\n    function FeatureCollection(featureCollection) {\n        crs(featureCollection);\n        bbox(featureCollection);\n        if (featureCollection.properties !== undefined) {\n            errors.push({\n                message: 'FeatureCollection object cannot contain a \"properties\" member',\n                line: featureCollection.__line__\n            });\n        }\n        if (featureCollection.coordinates !== undefined) {\n            errors.push({\n                message: 'FeatureCollection object cannot contain a \"coordinates\" member',\n                line: featureCollection.__line__\n            });\n        }\n        if (!requiredProperty(featureCollection, 'features', 'array')) {\n            if (!everyIs(featureCollection.features, 'object')) {\n                return errors.push({\n                    message: 'Every feature must be an object',\n                    line: featureCollection.__line__\n                });\n            }\n            featureCollection.features.forEach(Feature);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.1\n    function position(_, line) {\n        if (!Array.isArray(_)) {\n            return errors.push({\n                message: 'position should be an array, is a ' + (typeof _) +\n                    ' instead',\n                line: _.__line__ || line\n            });\n        }\n        if (_.length < 2) {\n            return errors.push({\n                message: 'position must have 2 or more elements',\n                line: _.__line__ || line\n            });\n        }\n        if (_.length > 3) {\n            return errors.push({\n                message: 'position should not have more than 3 elements',\n                level: 'message',\n                line: _.__line__ || line\n            });\n        }\n        if (!everyIs(_, 'number')) {\n            return errors.push({\n                message: 'each element in a position must be a number',\n                line: _.__line__ || line\n            });\n        }\n\n        if (options && options.precisionWarning) {\n            if (precisionWarningCount === maxPrecisionWarnings) {\n                precisionWarningCount += 1;\n                return errors.push({\n                    message: 'truncated warnings: we\\'ve encountered coordinate precision warning ' + maxPrecisionWarnings + ' times, no more warnings will be reported',\n                    level: 'message',\n                    line: _.__line__ || line\n                });\n            } else if (precisionWarningCount < maxPrecisionWarnings) {\n                _.forEach(function(num) {\n                    var precision = 0;\n                    var decimalStr = String(num).split('.')[1];\n                    if (decimalStr !== undefined)\n                        precision = decimalStr.length;\n                    if (precision > maxPrecision) {\n                        precisionWarningCount += 1;\n                        return errors.push({\n                            message: 'precision of coordinates should be reduced',\n                            level: 'message',\n                            line: _.__line__ || line\n                        });\n                    }\n                });\n            }\n        }\n    }\n\n    function positionArray(coords, type, depth, line) {\n        if (line === undefined && coords.__line__ !== undefined) {\n            line = coords.__line__;\n        }\n        if (depth === 0) {\n            return position(coords, line);\n        }\n        if (depth === 1 && type) {\n            if (type === 'LinearRing') {\n                if (!Array.isArray(coords[coords.length - 1])) {\n                    errors.push({\n                        message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n                        line: line\n                    });\n                    return true;\n                }\n                if (coords.length < 4) {\n                    errors.push({\n                        message: 'a LinearRing of coordinates needs to have four or more positions',\n                        line: line\n                    });\n                }\n                if (coords.length &&\n                    (coords[coords.length - 1].length !== coords[0].length ||\n                    !coords[coords.length - 1].every(function(pos, index) {\n                        return coords[0][index] === pos;\n                }))) {\n                    errors.push({\n                        message: 'the first and last positions in a LinearRing of coordinates must be the same',\n                        line: line\n                    });\n                    return true;\n                }\n            } else if (type === 'Line' && coords.length < 2) {\n                return errors.push({\n                    message: 'a line needs to have two or more coordinates to be valid',\n                    line: line\n                });\n            }\n        }\n        if (!Array.isArray(coords)) {\n            errors.push({\n                message: 'a number was found where a coordinate array should have been found: this needs to be nested more deeply',\n                line: line\n            });\n        } else {\n            var results = coords.map(function(c) {\n                return positionArray(c, type, depth - 1, c.__line__ || line);\n            });\n            return results.some(function(r) {\n                return r;\n            });\n        }\n    }\n\n    function crs(_) {\n        if (!_.crs) return;\n        var defaultCRSName = 'urn:ogc:def:crs:OGC:1.3:CRS84';\n        if (typeof _.crs === 'object' && _.crs.properties && _.crs.properties.name === defaultCRSName) {\n            errors.push({\n                message: 'old-style crs member is not recommended, this object is equivalent to the default and should be removed',\n                line: _.__line__\n            });\n        } else {\n            errors.push({\n                message: 'old-style crs member is not recommended',\n                line: _.__line__\n            });\n        }\n    }\n\n    function bbox(_) {\n        if (!_.bbox) {\n            return;\n        }\n        if (Array.isArray(_.bbox)) {\n            if (!everyIs(_.bbox, 'number')) {\n                errors.push({\n                    message: 'each element in a bbox member must be a number',\n                    line: _.bbox.__line__\n                });\n            }\n            if (!(_.bbox.length === 4 || _.bbox.length === 6)) {\n                errors.push({\n                    message: 'bbox must contain 4 elements (for 2D) or 6 elements (for 3D)',\n                    line: _.bbox.__line__\n                });\n            }\n            return errors.length;\n        }\n        errors.push({\n            message: 'bbox member must be an array of numbers, but is a ' + (typeof _.bbox),\n            line: _.__line__\n        });\n    }\n\n    function geometrySemantics(geom) {\n        if (geom.properties !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"properties\" member',\n                line: geom.__line__\n            });\n        }\n        if (geom.geometry !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"geometry\" member',\n                line: geom.__line__\n            });\n        }\n        if (geom.features !== undefined) {\n            errors.push({\n                message: 'geometry object cannot contain a \"features\" member',\n                line: geom.__line__\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.2\n    function Point(point) {\n        crs(point);\n        bbox(point);\n        geometrySemantics(point);\n        if (!requiredProperty(point, 'coordinates', 'array')) {\n            position(point.coordinates);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.6\n    function Polygon(polygon) {\n        crs(polygon);\n        bbox(polygon);\n        if (!requiredProperty(polygon, 'coordinates', 'array')) {\n            if (!positionArray(polygon.coordinates, 'LinearRing', 2)) {\n                rightHandRule(polygon, errors);\n            }\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.7\n    function MultiPolygon(multiPolygon) {\n        crs(multiPolygon);\n        bbox(multiPolygon);\n        if (!requiredProperty(multiPolygon, 'coordinates', 'array')) {\n            if (!positionArray(multiPolygon.coordinates, 'LinearRing', 3)) {\n                rightHandRule(multiPolygon, errors);\n            }\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.4\n    function LineString(lineString) {\n        crs(lineString);\n        bbox(lineString);\n        if (!requiredProperty(lineString, 'coordinates', 'array')) {\n            positionArray(lineString.coordinates, 'Line', 1);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.5\n    function MultiLineString(multiLineString) {\n        crs(multiLineString);\n        bbox(multiLineString);\n        if (!requiredProperty(multiLineString, 'coordinates', 'array')) {\n            positionArray(multiLineString.coordinates, 'Line', 2);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.3\n    function MultiPoint(multiPoint) {\n        crs(multiPoint);\n        bbox(multiPoint);\n        if (!requiredProperty(multiPoint, 'coordinates', 'array')) {\n            positionArray(multiPoint.coordinates, '', 1);\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.1.8\n    function GeometryCollection(geometryCollection) {\n        crs(geometryCollection);\n        bbox(geometryCollection);\n        if (!requiredProperty(geometryCollection, 'geometries', 'array')) {\n            if (!everyIs(geometryCollection.geometries, 'object')) {\n                errors.push({\n                    message: 'The geometries array in a GeometryCollection must contain only geometry objects',\n                    line: geometryCollection.__line__\n                });\n            }\n            if (geometryCollection.geometries.length === 1) {\n                errors.push({\n                    message: 'GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type',\n                    line: geometryCollection.geometries.__line__\n                });\n            }\n            geometryCollection.geometries.forEach(function(geometry) {\n                if (geometry) {\n                    if (geometry.type === 'GeometryCollection') {\n                        errors.push({\n                            message: 'GeometryCollection should avoid nested geometry collections',\n                            line: geometryCollection.geometries.__line__\n                        });\n                    }\n                    root(geometry);\n                }\n            });\n        }\n    }\n\n    // https://tools.ietf.org/html/rfc7946#section-3.2\n    function Feature(feature) {\n        crs(feature);\n        bbox(feature);\n        // https://github.com/geojson/draft-geojson/blob/master/middle.mkd#feature-object\n        if (feature.id !== undefined &&\n            typeof feature.id !== 'string' &&\n            typeof feature.id !== 'number') {\n            errors.push({\n                message: 'Feature \"id\" member must have a string or number value',\n                line: feature.__line__\n            });\n        }\n        if (feature.features !== undefined) {\n            errors.push({\n                message: 'Feature object cannot contain a \"features\" member',\n                line: feature.__line__\n            });\n        }\n        if (feature.coordinates !== undefined) {\n            errors.push({\n                message: 'Feature object cannot contain a \"coordinates\" member',\n                line: feature.__line__\n            });\n        }\n        if (feature.type !== 'Feature') {\n            errors.push({\n                message: 'GeoJSON features must have a type=feature member',\n                line: feature.__line__\n            });\n        }\n        requiredProperty(feature, 'properties', 'object');\n        if (!requiredProperty(feature, 'geometry', 'object')) {\n            // https://tools.ietf.org/html/rfc7946#section-3.2\n            // tolerate null geometry\n            if (feature.geometry) root(feature.geometry);\n        }\n    }\n\n    var types = {\n        Point: Point,\n        Feature: Feature,\n        MultiPoint: MultiPoint,\n        LineString: LineString,\n        MultiLineString: MultiLineString,\n        FeatureCollection: FeatureCollection,\n        GeometryCollection: GeometryCollection,\n        Polygon: Polygon,\n        MultiPolygon: MultiPolygon\n    };\n\n    var typesLower = Object.keys(types).reduce(function(prev, curr) {\n        prev[curr.toLowerCase()] = curr;\n        return prev;\n    }, {});\n\n    if (typeof gj !== 'object' ||\n        gj === null ||\n        gj === undefined) {\n        errors.push({\n            message: 'The root of a GeoJSON object must be an object.',\n            line: 0\n        });\n        return errors;\n    }\n\n    root(gj);\n\n    errors.forEach(function(err) {\n        if ({}.hasOwnProperty.call(err, 'line') && err.line === undefined) {\n            delete err.line;\n        }\n    });\n\n    return errors;\n}\n\nmodule.exports.hint = hint;\n"]},"metadata":{},"sourceType":"script"}